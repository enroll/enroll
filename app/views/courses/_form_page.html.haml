.landing-page-fields
  %h2 Course page

  .form-section
    / .pull-right.actions.h1
    /   

    .cover-image.tc
      = form.simple_fields_for :cover_image do |f|
        %div.spinner
        .default-buttons
          .buttons
            = f.input_field :image, as: :file
            %a.btn.btn-default.inverted.cover-button.add-cover-button Change cover image
          .buttons
            %a.preview.btn.btn-primary.small.preview-button{:href => '#'} Preview
        .dragging-buttons
          .buttons
            %a.btn.btn-default.inverted.cover-button Drag image to position
          .buttons
            %a.btn.btn-primary.small.preview-button.save-dragging{:href => '#'} Save
        .text-buttons
          %a.delete-button{href: '#'}
            %i.icon-circled-cross
            Delete cover image
          %a.reposition-button{href: '#'}
            %i.icon-arrow-combo
            Reposition

    .form-group.wide
      = form.label :description, 'Page content'
      .controls
        = form.input_field :description, label: 'Page', class: 'large'
      %p.help-block
        Enter text you would like on your landing page. Use the # symbol to mark headings.

    .form-group.wide
      = form.label :instructor_biography, 'About the instructor'
      .controls
        = form.input_field :instructor_biography

:coffeescript
  new LandingPagePreview(
    el: '.landing-page-fields',
    course: #{@course.to_json},
    previewPath: #{preview_course_path(@course).to_json}
  )
  new CoverImageUploader(
    el: '.cover-image',
    imagesPath: '#{dashboard_cover_images_path(course_id: @course.id)}',
    updatePath: #{dashboard_cover_image_path(':id').to_json},
    currentImage: #{@course.cover_image(:admin).to_json},
    currentOffset: #{@course.cover_images.last.try(:offset_admin_px).to_json},
    defaultImage: #{asset_url('admin-cover-default.jpg').to_json},
    adminImageId: #{@course.cover_images.last.try(:id).to_json}
  )